import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,a as i,b as l,e as t,f as e,o as h}from"./app-DcPmYxSv.js";const d={};function r(k,s){return h(),n("div",null,[s[0]||(s[0]=i("h1",{id:"設定-nginx",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#設定-nginx"},[i("span",null,"設定 Nginx")])],-1)),s[1]||(s[1]=i("h2",{id:"前言",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#前言"},[i("span",null,"前言")])],-1)),s[2]||(s[2]=i("p",null,[e("適用於 Nginx 1.23 版本的設定，"),i("br"),e(" 最新的設仍要參照官方文件，"),i("br"),e(" 本文主要是記錄過去專案常用到的設定。")],-1)),l(" more "),s[3]||(s[3]=t(`<h2 id="設定檔產生網站" tabindex="-1"><a class="header-anchor" href="#設定檔產生網站"><span>設定檔產生網站</span></a></h2><p><a href="https://www.digitalocean.com/community/tools/nginx?global.app.lang=zhTW" target="_blank" rel="noopener noreferrer">https://www.digitalocean.com/community/tools/nginx?global.app.lang=zhTW</a></p><h2 id="常用設定" tabindex="-1"><a class="header-anchor" href="#常用設定"><span>常用設定</span></a></h2><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-nginx"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 設定監聽的 port</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    listen </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         80</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 定義伺服器名稱</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    server_name </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    localhost;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 設定專案資料夾</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    root </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">           /home/username/vue-project/dist;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 指定初始頁面</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    index </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          index.html;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 宣告編碼</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    charset </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">utf-8;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 隱藏伺服器版本資訊</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    server_tokens </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">off</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 加入資安標頭</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    add_header </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Content-Security-Policy </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    default-src &#39;self&#39;;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    font-src &#39;self&#39;;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    img-src &#39;self&#39;;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    style-src &#39;self&#39;;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    script-src &#39;self&#39;;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    form-action &#39;self&#39;;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    frame-src &#39;none&#39;;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    frame-ancestors &#39;none&#39;;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> always;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    add_header </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">X-Content-Security-Policy </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    default-src &#39;self&#39;;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    font-src &#39;self&#39;;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    img-src &#39;self&#39;;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    style-src &#39;self&#39;;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    script-src &#39;self&#39;;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    form-action &#39;self&#39;;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    frame-src &#39;none&#39;;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    frame-ancestors &#39;none&#39;;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> always;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    add_header </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Strict-Transport-Security </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;max-age=63072000&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> always;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    add_header </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">X-Content-Type-Options </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;nosniff&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> always;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    add_header </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">X-Frame-Options </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;SAMEORIGIN&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> always;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    add_header </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">X-XSS-Protection  </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;1; mode=block&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> always;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="上傳檔案參考設定" tabindex="-1"><a class="header-anchor" href="#上傳檔案參考設定"><span>上傳檔案參考設定</span></a></h2><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-nginx"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 檔案大小限制，預設1m</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">client_max_body_size </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    1m</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">client_header_timeout </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   60s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">client_body_timeout </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     60s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">proxy_connect_timeout </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   60s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">proxy_read_timeout </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      60s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">proxy_send_timeout </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      60s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="設定參考文件" tabindex="-1"><a class="header-anchor" href="#設定參考文件"><span>設定參考文件</span></a></h1><p>將一些有用到的設定與功能說明紀錄於此</p><h2 id="client-body-buffer-size" tabindex="-1"><a class="header-anchor" href="#client-body-buffer-size"><span>client_body_buffer_size</span></a></h2><ul><li>語法：</li></ul><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-nginx"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">client_body_buffer_size </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">size;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>預設：</li></ul><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-nginx"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">client_body_buffer_size </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">8k|16k;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>作用範圍：<code>http</code>, <code>server</code>, <code>location</code></li><li>功能說明：設置請求的緩衝區大小。 如果請求主體大於緩衝區，則將整個主體或僅將其部分寫入臨時文件。臨時文件的設定可參考 <code>client_body_temp_path</code>。預設情況下，緩衝區大小等於兩個內存頁。 這是 x86、其他 32 位平台和 x86-64 上的 8K。 在其他 64 位平台上通常為 16K。</li></ul><h2 id="client-body-temp-path" tabindex="-1"><a class="header-anchor" href="#client-body-temp-path"><span>client_body_temp_path</span></a></h2><ul><li>語法：</li></ul><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-nginx"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">client_body_temp_path </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">path [level1 [level2 [level3]]];</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>預設：</li></ul><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-nginx"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">client_body_temp_path </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">client_body_temp;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>作用範圍：<code>http</code>, <code>server</code>, <code>location</code></li><li>功能說明：定義用於存儲持有客戶端請求主體的臨時文件的目錄。 指定目錄下最多可以使用三級子目錄層次結構。需要注意存取權限設定。</li></ul><h2 id="client-body-timeout" tabindex="-1"><a class="header-anchor" href="#client-body-timeout"><span>client_body_timeout</span></a></h2><ul><li>語法：</li></ul><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-nginx"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">client_body_timeout </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">time;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>預設：</li></ul><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-nginx"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">client_body_timeout </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">60s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>作用範圍：<code>http</code>, <code>server</code>, <code>location</code></li><li>功能說明：定義請求主體的逾時時間。超時僅針對兩次連續讀取操作之間的一段時間設置，而非針對整個請求主體的傳輸。 如果客戶端在此時間內未傳輸任何內容，則請求將終止並出現 408（Request Timeout）錯誤。</li></ul><h2 id="client-header-buffer-size" tabindex="-1"><a class="header-anchor" href="#client-header-buffer-size"><span>client_header_buffer_size</span></a></h2><ul><li>語法：</li></ul><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-nginx"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">client_header_buffer_size </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">size;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>預設：</li></ul><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-nginx"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">client_header_buffer_size </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1k</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>作用範圍：<code>http</code>, <code>server</code></li><li>功能說明：設置讀取客戶端請求標頭的緩衝區大小。對於大多數請求，1K 的緩衝區就足夠了。但是，如果請求包含長 cookie，或者來自 WAP 客戶端，則它可能不適合 1K。 如果請求行或請求頭字段不適合此緩衝區，則分配由 <code>large_client_header_buffers</code> 指令配置的更大緩衝區。</li></ul><h2 id="client-header-timeout" tabindex="-1"><a class="header-anchor" href="#client-header-timeout"><span>client_header_timeout</span></a></h2><ul><li>語法：</li></ul><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-nginx"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">client_header_timeout </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">time;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>預設：</li></ul><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-nginx"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">client_header_timeout </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">60s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>作用範圍：<code>http</code>, <code>server</code></li><li>功能說明：定義請求標頭的逾時時間。如果客戶端沒有在這段時間內傳輸整個標頭，請求將終止並出現 408（Request Timeout）錯誤。</li></ul><h2 id="client-max-body-size" tabindex="-1"><a class="header-anchor" href="#client-max-body-size"><span>client_max_body_size</span></a></h2><ul><li>語法：</li></ul><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-nginx"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">client_max_body_size </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">size;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>預設：</li></ul><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-nginx"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">client_max_body_size </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1m</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>作用範圍：<code>http</code>, <code>server</code>, <code>location</code></li><li>功能說明：設定最大可允許的請求大小，請求超過大小會返回 413 (Request Entity Too Large)，設定 0 可禁止檢查。</li></ul><h2 id="large-client-header-buffers" tabindex="-1"><a class="header-anchor" href="#large-client-header-buffers"><span>large_client_header_buffers</span></a></h2><ul><li>語法：</li></ul><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-nginx"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">large_client_header_buffers </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">number size;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>預設：</li></ul><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-nginx"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">large_client_header_buffers </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 8k</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>作用範圍：<code>http</code>, <code>server</code></li><li>功能說明：設置用於讀取大型請求標頭的緩衝區的最大數量和大小。 一個請求行不能超過一個緩衝區的大小，否則會向客戶端返回 414（Request-URI Too Large）錯誤。請求頭字段也不能超過一個緩衝區的大小，否則返回 400（Bad Request）錯誤給客戶端。 緩衝區僅按需分配。 默認情況下，緩衝區大小等於 8K 字節。 如果在請求處理結束後連接轉換為保持活動狀態，則釋放這些緩衝區。</li></ul><h2 id="proxy-connect-timeout" tabindex="-1"><a class="header-anchor" href="#proxy-connect-timeout"><span>proxy_connect_timeout</span></a></h2><ul><li>語法：</li></ul><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-nginx"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">proxy_connect_timeout </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">time;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>預設：</li></ul><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-nginx"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">proxy_connect_timeout </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">60s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>作用範圍：<code>http</code>, <code>server</code>, <code>location</code></li><li>功能說明：定義與代理服務器建立連接的超時時間。 需要注意的是這個超時時間通常不能超過 75 秒。</li></ul><h2 id="proxy-read-timeout" tabindex="-1"><a class="header-anchor" href="#proxy-read-timeout"><span>proxy_read_timeout</span></a></h2><ul><li>語法：</li></ul><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-nginx"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">proxy_read_timeout </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">time;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>預設：</li></ul><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-nginx"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">proxy_read_timeout </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">60s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>作用範圍：<code>http</code>, <code>server</code>, <code>location</code></li><li>功能說明：定義從代理服務器讀取響應的超時時間。 超時僅設置在兩個連續的讀取操作之間，而不是針對整個響應的傳輸。 如果代理服務器在這段時間內沒有傳輸任何東西，連接就會關閉。</li><li></li></ul><h2 id="proxy-send-timeout" tabindex="-1"><a class="header-anchor" href="#proxy-send-timeout"><span>proxy_send_timeout</span></a></h2><ul><li>語法：</li></ul><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-nginx"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">proxy_send_timeout </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">time;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>預設：</li></ul><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-nginx"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">proxy_send_timeout </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">60s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>作用範圍：<code>http</code>, <code>server</code>, <code>location</code></li><li>功能說明：設置將請求傳輸到代理服務器的超時時間。 超時僅設置在兩個連續的寫操作之間，而不是針對整個請求的傳輸。 如果代理服務器在這段時間內沒有收到任何東西，連接將關閉。</li></ul>`,68))])}const g=a(d,[["render",r]]),o=JSON.parse('{"path":"/posts/2022-11-29-config-nginx/","title":"Nginx 常用設定","lang":"zh-TW","frontmatter":{"title":"Nginx 常用設定","description":"Nginx 常用設定","date":"2022-11-29T00:00:00.000Z","category":"伺服器","tag":["Nginx","Nginx 1.23"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Nginx 常用設定\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-11-29T00:00:00.000Z\\",\\"dateModified\\":\\"2024-12-18T17:01:36.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Pamis Wang\\",\\"url\\":\\"https://pamis.dev\\",\\"email\\":\\"pamis.wang@gmail.com\\"}]}"],["meta",{"property":"og:url","content":"https://pamis.dev/posts/2022-11-29-config-nginx/"}],["meta",{"property":"og:site_name","content":"Pamis Blog"}],["meta",{"property":"og:title","content":"Nginx 常用設定"}],["meta",{"property":"og:description","content":"Nginx 常用設定"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-TW"}],["meta",{"property":"og:updated_time","content":"2024-12-18T17:01:36.000Z"}],["meta",{"property":"article:tag","content":"Nginx 1.23"}],["meta",{"property":"article:tag","content":"Nginx"}],["meta",{"property":"article:published_time","content":"2022-11-29T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-12-18T17:01:36.000Z"}]]},"git":{"createdTime":1689521396000,"updatedTime":1734541296000,"contributors":[{"name":"pamis","username":"pamis","email":"pamis1116@gmail.com","commits":3,"url":"https://github.com/pamis"},{"name":"Pamis Wang","username":"","email":"pamis1116@gmail.com","commits":2}]},"readingTime":{"minutes":4.08,"words":1224},"filePathRelative":"posts/2022-11-29-config-nginx/index.md","excerpt":"\\n<h2>前言</h2>\\n<p>適用於 Nginx 1.23 版本的設定，<br>\\n最新的設仍要參照官方文件，<br>\\n本文主要是記錄過去專案常用到的設定。</p>\\n"}');export{g as comp,o as data};
