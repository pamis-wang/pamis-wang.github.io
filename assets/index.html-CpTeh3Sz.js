import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,a,b as n,e as p,f as s,o as r}from"./app-BnAZYMcT.js";const l="/assets/2024-07-21-vpc-1-BGdazxsX.png",o="/assets/2024-07-21-vpc-2-uoPGsuBR.png",c="/assets/2024-07-21-security-groups-ssh-BOPouQ3g.png",d="/assets/2024-07-21-ec2-jump-1-Cy1Yhj1T.png",h="/assets/2024-07-21-security-groups-http--_1qglVO.png",g="/assets/2024-07-21-security-groups-jump-B9JOSThU.png",m="/assets/2024-07-21-ec2-jump-2-CZTSgzRH.png",u="/assets/2024-07-21-ec2-VCJiu4gN.png",k="/assets/2024-07-21-ssh-ec2-jump-CXx16Jet.png",f="/assets/2024-07-21-ssh-ec2-CkOF7oSr.png",b="/assets/2024-07-21-target-group-1-RbHrWwMs.png",y="/assets/2024-07-21-target-group-2-BP5xpiok.png",A="/assets/2024-07-21-target-group-3-YaV8-vaO.png",v="/assets/2024-07-21-elb-1-apYOxx-o.png",F="/assets/2024-07-21-elb-2-jbfV4Jk4.png",C={};function x(_,i){return r(),t("div",null,[i[0]||(i[0]=a("h1",{id:"部署專案到-aws-並使用-vpc-elb",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#部署專案到-aws-並使用-vpc-elb"},[a("span",null,"部署專案到 AWS 並使用 VPC ELB")])],-1)),i[1]||(i[1]=a("h2",{id:"前言",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#前言"},[a("span",null,"前言")])],-1)),i[2]||(i[2]=a("p",null,[s("由於工作中需要把專案部署到 AWS"),a("br"),s(" 這篇文章就當作是個步驟筆記吧")],-1)),n(" more "),i[3]||(i[3]=p('<h2 id="部署目標" tabindex="-1"><a class="header-anchor" href="#部署目標"><span>部署目標</span></a></h2><p>本次目的是把前後端專案都部署到 AWS 上，使用 VPC 、 ELB 、 EC2 、 RDS 等服務。</p><p>但本次教學還不會用上 Auto Scaling ，這意味著不會自動擴展。</p><p>如果沒有使用 Amazon EC2 Auto Scaling 就要自己手動管理 EC2。</p><ul><li>VPC：虛擬私有網路，將專案服務都集中在虛擬私有網路獨立起來便於管理，對於安全性也比較好</li><li>ELB：負載平衡，根據流量自動導向負荷較低的服務</li><li>EC2：虛擬機會開兩台，一台跳板主機開放 ssh port 跳到專案機，一台專案主機不對外只開放 http 和 https 的 port</li><li>RDS：後端專案的資料庫</li></ul><h2 id="建立-vpc" tabindex="-1"><a class="header-anchor" href="#建立-vpc"><span>建立 VPC</span></a></h2><figure><img src="'+l+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>2 個公有子網路<br> 2 個私有子網路<br> NAT 閘道為每個可用區域</p><p>NAT 閘道選無，因為是用自己的帳號所以想當免費仔。<br> 實際上根據自己專案需求來選擇。</p><figure><img src="'+o+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="建立-ec2" tabindex="-1"><a class="header-anchor" href="#建立-ec2"><span>建立 EC2</span></a></h2><h3 id="跳板主機的安全群組" tabindex="-1"><a class="header-anchor" href="#跳板主機的安全群組"><span>跳板主機的安全群組</span></a></h3><figure><img src="'+c+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p><code>pamis-project-ssh</code>：允許 ssh port 連入<br> 建立跳板主機的安全群組，VPC 要選剛剛建立的。</p><h3 id="跳板主機" tabindex="-1"><a class="header-anchor" href="#跳板主機"><span>跳板主機</span></a></h3><p>建立跳板主機</p><figure><img src="'+d+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>重點是網路的部分<br> VPC 一定要選對<br> 子網路要選 <code>public</code> 不然外面連不進來<br> 啟用自動指派公有 IP (注：如果想用彈性 IP 也行)<br> 常見安全群組則是選剛剛建立的 <code>pamis-project-ssh</code></p><h3 id="專案主機的安全群組" tabindex="-1"><a class="header-anchor" href="#專案主機的安全群組"><span>專案主機的安全群組</span></a></h3><p>建立安全群組 <code>pamis-project-http</code>：允許 http 和 https 連入</p><figure><img src="'+h+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>建立安全群組 <code>pamis-project-jump</code>：允許 跳板主機 連入</p><p>這裡比較特別，需要填入跳板機的私有 IP 。</p><figure><img src="'+g+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="'+m+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="專案主機" tabindex="-1"><a class="header-anchor" href="#專案主機"><span>專案主機</span></a></h3><p>建立專案主機</p><figure><img src="'+u+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>重點也還是網路的部分<br> VPC 一定要選對<br> 子網路要選 <code>private</code> 不然會對外暴露，跳板機就白開了<br> 不要啟用自動指派公有 IP<br> 常見安全群組則是選剛剛建立的 <code>pamis-project-http</code> 與 <code>pamis-project-jump</code></p><h3 id="測試連線" tabindex="-1"><a class="header-anchor" href="#測試連線"><span>測試連線</span></a></h3><p>參考以下設定</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># pamis-project-ec2-jump</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Host</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pamis-project-ec2-jump</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	HostName</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 18.182.31.165</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	User</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ubuntu</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	PreferredAuthentications</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> publickey</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	IdentityFile</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ~/.ssh/pamis-dev-aws.pem</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># pamis-project-ec2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Host</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pamis-project-ec2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	HostName</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10.0.137.3</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	User</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ubuntu</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	Proxyjump</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pamis-project-ec2-jump</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	PreferredAuthentications</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> publickey</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	IdentityFile</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ~/.ssh/pamis-dev-aws.pem</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Proxyjump 就是設定要用哪個跳板主機來登入</p><p>連到跳板主機</p><figure><img src="`+k+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>連到專案主機</p><figure><img src="'+f+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>如果出現以上訊息就代表步驟都正確</p><h2 id="建立目標群組" tabindex="-1"><a class="header-anchor" href="#建立目標群組"><span>建立目標群組</span></a></h2><p>目標群組在 EC2 側邊選單下面</p><figure><img src="'+b+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>重點一樣選對 VPC</p><figure><img src="'+y+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>下一步會看到這個註冊頁面</p><p>選擇專案主機</p><figure><img src="'+A+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="建立負載平衡器" tabindex="-1"><a class="header-anchor" href="#建立負載平衡器"><span>建立負載平衡器</span></a></h2><p>終於最後一步驟</p><figure><img src="'+v+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>這邊設定要留意的比較多<br> 重點一樣選對 VPC<br> 然後把兩個子網路都打勾<br> 安全群組選 http</p><figure><img src="'+F+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>以上步驟就完成了</p><h2 id="參考資料" tabindex="-1"><a class="header-anchor" href="#參考資料"><span>參考資料</span></a></h2><p><a href="https://docs.aws.amazon.com/zh_tw/vpc/latest/userguide/what-is-amazon-vpc.html" target="_blank" rel="noopener noreferrer">什麼是 Amazon VPC？</a><br><a href="https://docs.aws.amazon.com/zh_tw/autoscaling/ec2/userguide/tutorial-ec2-auto-scaling-load-balancer.html" target="_blank" rel="noopener noreferrer">教學課程：設定擴展和負載平衡應用程式</a></p>',54))])}const z=e(C,[["render",x]]),j=JSON.parse('{"path":"/posts/2024-07-21-aws-vpc-elb-ec2/","title":"部署專案到 AWS 並使用 VPC ELB EC2","lang":"zh-TW","frontmatter":{"title":"部署專案到 AWS 並使用 VPC ELB EC2","description":"部署專案到 AWS 並使用 VPC ELB EC2","date":"2024-07-21T00:00:00.000Z","category":"雲端","tag":["AWS","ELB","EC2"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"部署專案到 AWS 並使用 VPC ELB EC2\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-07-21T00:00:00.000Z\\",\\"dateModified\\":\\"2024-12-29T11:50:27.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Pamis Wang\\",\\"url\\":\\"https://pamis.dev\\",\\"email\\":\\"pamis.wang@gmail.com\\"}]}"],["meta",{"property":"og:url","content":"https://pamis.dev/posts/2024-07-21-aws-vpc-elb-ec2/"}],["meta",{"property":"og:site_name","content":"Pamis Blog"}],["meta",{"property":"og:title","content":"部署專案到 AWS 並使用 VPC ELB EC2"}],["meta",{"property":"og:description","content":"部署專案到 AWS 並使用 VPC ELB EC2"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-TW"}],["meta",{"property":"og:updated_time","content":"2024-12-29T11:50:27.000Z"}],["meta",{"property":"article:tag","content":"EC2"}],["meta",{"property":"article:tag","content":"ELB"}],["meta",{"property":"article:tag","content":"AWS"}],["meta",{"property":"article:published_time","content":"2024-07-21T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-12-29T11:50:27.000Z"}]]},"git":{"createdTime":1721507599000,"updatedTime":1735473027000,"contributors":[{"name":"Pamis Wang","username":"","email":"pamis1116@gmail.com","commits":4}]},"readingTime":{"minutes":2.96,"words":888},"filePathRelative":"posts/2024-07-21-aws-vpc-elb-ec2/index.md","excerpt":"\\n<h2>前言</h2>\\n<p>由於工作中需要把專案部署到 AWS<br>\\n這篇文章就當作是個步驟筆記吧</p>\\n"}');export{z as comp,j as data};
