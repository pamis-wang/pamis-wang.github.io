import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,e as s,b as n,o as t}from"./app-Cfgedju3.js";const h={};function l(r,i){return t(),e("div",null,[i[0]||(i[0]=s('<h1 id="ssh-金鑰設定" tabindex="-1"><a class="header-anchor" href="#ssh-金鑰設定"><span>SSH 金鑰設定</span></a></h1><h2 id="前言" tabindex="-1"><a class="header-anchor" href="#前言"><span>前言</span></a></h2><p>本篇文章適用於 Windows 和 Linux 的金鑰建立設定教學。</p><p>每次登入 Linux 主機都要打密碼卻常常忘記，<br> 或是因為<a href="https://github.blog/2020-12-15-token-authentication-requirements-for-git-operations/" target="_blank" rel="noopener noreferrer">GitHub 的安全性政策</a>，<br> 如果碰上以上的情境，那麼就要來用金鑰。</p>',4)),n(" more "),i[1]||(i[1]=s(`<h2 id="確認目前的電腦裡是否有金鑰檔案" tabindex="-1"><a class="header-anchor" href="#確認目前的電腦裡是否有金鑰檔案"><span>確認目前的電腦裡是否有金鑰檔案</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ~/.ssh</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ls</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Linux：通常放在 /home/username/.ssh<br> Windows：通常放在 C:\\Users\\username.ssh</p><h2 id="基本-ssh-金鑰設定" tabindex="-1"><a class="header-anchor" href="#基本-ssh-金鑰設定"><span>基本 SSH 金鑰設定</span></a></h2><h3 id="建立指令" tabindex="-1"><a class="header-anchor" href="#建立指令"><span>建立指令</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ssh-keygen</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -t</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rsa</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -C</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yourEmail@example.com</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> id_rsa</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="可選參數" tabindex="-1"><a class="header-anchor" href="#可選參數"><span>可選參數：</span></a></h3><ul><li>–t 指定金鑰型別，預設是 RSA ，可以省略。</li><li>-b：指定金鑰長度（bits），RSA 最小要求 768 位，預設是 2048 位；DSA 密鑰必須是 1024（FIPS 1862 標準規定）</li><li>-f：指定金鑰檔案儲存檔名，省略會進行提問，預設檔名通常為 id_rsa。</li><li>-P：提供舊密碼，省略會進行提問， <code>-P &#39;&#39;</code> 表示不需要密碼</li><li>-N：提供新密碼，省略會進行提問， <code>-N &#39;&#39;</code> 表示不需要密碼</li><li>-C：設定註釋文字，如 mail，這邊的 mail 需要是註冊 GitLab 的那個 mail。</li><li>-R：主機名稱：從 known_hosts 刪除所有屬於 hostname 的密鑰</li></ul><h3 id="取得金鑰內容" tabindex="-1"><a class="header-anchor" href="#取得金鑰內容"><span>取得金鑰內容</span></a></h3><p>使用 <code>cat</code> 指令，然後複製裡面的 SSH key</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ~/.ssh/id_rsa.pub</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="測試金鑰連線" tabindex="-1"><a class="header-anchor" href="#測試金鑰連線"><span>測試金鑰連線</span></a></h3><p>測試是否設定成功 &amp; 設定 SSH agent</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ssh</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -T</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> git@github.com</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="多組-ssh-金鑰設定" tabindex="-1"><a class="header-anchor" href="#多組-ssh-金鑰設定"><span>多組 SSH 金鑰設定</span></a></h2><h3 id="金鑰觀念" tabindex="-1"><a class="header-anchor" href="#金鑰觀念"><span>金鑰觀念</span></a></h3><p>每一組金鑰可以給多台客戶端電腦使用<br> 但由於每一組金鑰只能對應一台伺服器主機<br> 所以如果要連線多個 git 服務需要設定多組金鑰</p><h3 id="建立多個不同檔名的金鑰" tabindex="-1"><a class="header-anchor" href="#建立多個不同檔名的金鑰"><span>建立多個不同檔名的金鑰</span></a></h3><p>建立教學可參考上面 <a href="#%E5%9F%BA%E6%9C%AC-ssh-%E9%87%91%E9%91%B0%E8%A8%AD%E5%AE%9A">基本 SSH 金鑰設定</a></p><p>或可參考下方設定</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ssh-keygen</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -t</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rsa</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -C</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yourEmailA@example.com</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> id_rsa_gitlab</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ssh-keygen</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -t</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rsa</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -C</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yourEmailB@example.com</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> id_rsa_github</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="建立-ssh-config-檔案" tabindex="-1"><a class="header-anchor" href="#建立-ssh-config-檔案"><span>建立 SSH config 檔案</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ~/.ssh</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nano</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> config</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>也可以使用 visual studio code 連入做新增</p><h3 id="填寫-ssh-config-檔案" tabindex="-1"><a class="header-anchor" href="#填寫-ssh-config-檔案"><span>填寫 SSH config 檔案</span></a></h3><p>可參考以下範例格式</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 命名連線名稱</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Host</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gitlab-company</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 定義連線的名稱</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	HostName</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gitlab.com</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 要輸入連結的網站網址或IP位址</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	Port</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 222</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 指定埠口</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	User</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yourEmailA@example.com</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 使用者名稱 mail 或 登入 ID</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	PreferredAuthentications</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> publickey</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 強制使用公鑰驗證</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	IdentityFile</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ~/.ssh/id_rsa_gitlab</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # SSH key的位置</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Host</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> github</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 定義連線的名稱</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	HostName</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> github.com</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 要輸入連結的網站網址或IP位址</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	User</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yourEmailB@example.com</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 使用者名稱 mail 或 登入 ID</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	PreferredAuthentications</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> publickey</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 強制使用公鑰驗證</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	IdentityFile</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ~/.ssh/id_rsa_github</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # SSH key的位置</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="設定-ssh-config-權限" tabindex="-1"><a class="header-anchor" href="#設定-ssh-config-權限"><span>設定 SSH config 權限</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ~/.ssh</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> chmod</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 600</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> config</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="測試金鑰連線-1" tabindex="-1"><a class="header-anchor" href="#測試金鑰連線-1"><span>測試金鑰連線</span></a></h3><p>測試教學可參考上面</p><h3 id="讀取-config-權限異常" tabindex="-1"><a class="header-anchor" href="#讀取-config-權限異常"><span>讀取 config 權限異常</span></a></h3><p>如果測試 ssh 金鑰出現錯誤訊息</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Bad</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> owner</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> or</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> permissions</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> on</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /home/users/.ssh/config</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>執行以下命令行：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ~/.ssh</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> chmod</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 600</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> config</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div>`,36))])}const p=a(h,[["render",l]]),c=JSON.parse('{"path":"/posts/2022-12-15-setting-ssh-key/","title":"SSH 金鑰建立與設定","lang":"zh-TW","frontmatter":{"title":"SSH 金鑰建立與設定","description":"SSH 金鑰建立與設定","date":"2022-12-15T00:00:00.000Z","category":"SSH","tag":["SSH","Ubuntu","Linux","Windows"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"SSH 金鑰建立與設定\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-12-15T00:00:00.000Z\\",\\"dateModified\\":\\"2024-12-18T17:01:36.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Pamis Wang\\",\\"url\\":\\"https://pamis.dev\\",\\"email\\":\\"pamis.wang@gmail.com\\"}]}"],["meta",{"property":"og:url","content":"https://pamis.dev/posts/2022-12-15-setting-ssh-key/"}],["meta",{"property":"og:site_name","content":"Pamis Blog"}],["meta",{"property":"og:title","content":"SSH 金鑰建立與設定"}],["meta",{"property":"og:description","content":"SSH 金鑰建立與設定"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-TW"}],["meta",{"property":"og:updated_time","content":"2024-12-18T17:01:36.000Z"}],["meta",{"property":"article:tag","content":"Windows"}],["meta",{"property":"article:tag","content":"Linux"}],["meta",{"property":"article:tag","content":"Ubuntu"}],["meta",{"property":"article:tag","content":"SSH"}],["meta",{"property":"article:published_time","content":"2022-12-15T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-12-18T17:01:36.000Z"}]]},"git":{"createdTime":1689521396000,"updatedTime":1734541296000,"contributors":[{"name":"pamis","username":"pamis","email":"pamis1116@gmail.com","commits":4,"url":"https://github.com/pamis"},{"name":"EXMAIL\\\\pamis","username":"","email":"pamis@mail.tca.org.tw","commits":1},{"name":"Pamis Wang","username":"","email":"pamis.wang@gmail.com","commits":1}]},"readingTime":{"minutes":2.42,"words":726},"filePathRelative":"posts/2022-12-15-setting-ssh-key/index.md","excerpt":"\\n<h2>前言</h2>\\n<p>本篇文章適用於 Windows 和 Linux 的金鑰建立設定教學。</p>\\n<p>每次登入 Linux 主機都要打密碼卻常常忘記，<br>\\n或是因為<a href=\\"https://github.blog/2020-12-15-token-authentication-requirements-for-git-operations/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">GitHub 的安全性政策</a>，<br>\\n如果碰上以上的情境，那麼就要來用金鑰。</p>\\n"}');export{p as comp,c as data};
