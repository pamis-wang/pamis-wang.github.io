import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,e as s,b as e,o as l}from"./app-DcPmYxSv.js";const h="/assets/meme-01-BDfxPWBG.jpg",t="/assets/meme-02-CiKH6E7i.jpg",p={};function k(d,i){return l(),n("div",null,[i[0]||(i[0]=s('<h1 id="minio-安裝與使用" tabindex="-1"><a class="header-anchor" href="#minio-安裝與使用"><span>MinIO 安裝與使用</span></a></h1><h2 id="前言" tabindex="-1"><a class="header-anchor" href="#前言"><span>前言</span></a></h2><p>又是檔案上傳的需求來了！</p><p>還記得那個年代嗎？<br> 檔案直接丟進伺服器的某個角落，然後祈禱不要被駭客發現...<br> 不然就是資料夾不小心動到後就全員失蹤了。</p><p>後來 FTP 出現，我們以為自己很專業，結果明文傳輸被抓包，<br> 現在大家都在講物件儲存，彷彿不用 S3 就不夠潮。</p><p>但是！錢包空空怎麼辦？AWS 帳單一來就想哭，<br> 這時候 <strong>MinIO</strong> 就是我們的救星啦！免費自架，還能假裝自己在用 S3 ，<br> 反正 API 相容，老闆和客戶看不出來的啦 （小聲）</p><figure><img src="'+h+'" alt="軟體開發日常" tabindex="0" loading="lazy"><figcaption>軟體開發日常</figcaption></figure>',7)),e(" more "),i[1]||(i[1]=s('<h2 id="部署目標" tabindex="-1"><a class="header-anchor" href="#部署目標"><span>部署目標</span></a></h2><p>用 Docker 把 MinIO 丟進 Ubuntu 主機裡，然後假裝自己是雲端大神！</p><h2 id="關於-minio-商業化變動" tabindex="-1"><a class="header-anchor" href="#關於-minio-商業化變動"><span>關於 MinIO 商業化變動</span></a></h2><p>本次安裝的 MinIO 版本為：<code>minio/minio:RELEASE.2025-04-22T22-12-26Z</code></p><p>為什麼要指定這個版本呢？因為 MinIO 2025 年開始耍流氓了！ 😤<br><strong>社群版的 Web UI 功能被大砍特砍</strong>，想要完整功能？掏錢買商業版！<br> 開源社群瞬間炸鍋：「說好的開源呢？怎麼變成開錢包了？」 💰</p><p>這根本就是「開源轉割韭菜」的經典案例啊！</p><figure><img src="'+t+`" alt="對！消失了😭" tabindex="0" loading="lazy"><figcaption>對！消失了😭</figcaption></figure><p>目前社群有 <code>OpenMaxIO</code> 這個 Fork 專案在反抗，致力於維護完整的開源版本功能。<br> 對抗資本主義，從拯救開源專案開始！</p><h2 id="docker-compose-部署" tabindex="-1"><a class="header-anchor" href="#docker-compose-部署"><span>Docker Compose 部署</span></a></h2><p>接下來就是喜聞樂見的 Copy &amp; Paste 時間！</p><h3 id="_1-建立專案目錄" tabindex="-1"><a class="header-anchor" href="#_1-建立專案目錄"><span>1. 建立專案目錄</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> minio</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> minio</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>資料夾名稱隨你高興，反正最後找得到就好。</p></blockquote><h3 id="_2-建立-docker-compose-yml" tabindex="-1"><a class="header-anchor" href="#_2-建立-docker-compose-yml"><span>2. 建立 docker-compose.yml</span></a></h3><p>經典的「我不會 Docker，但我會 Copy」環節：</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">services</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  minio</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 最後有完整管理功能的版本</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    image</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">minio/minio:RELEASE.2025-04-22T22-12-26Z</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    container_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">minio</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    restart</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">always</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    ports</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;9000:9000&quot;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # API 端口</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;9001:9001&quot;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # Web 端口</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    environment</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">MINIO_ROOT_USER=minioadmin</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">MINIO_ROOT_PASSWORD=minioadmin123</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    volumes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">./data:/data</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">server /data --console-address &quot;:9001&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    healthcheck</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      test</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;CMD&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;curl&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;-f&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://localhost:9000/minio/health/live&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      interval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">30s</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      timeout</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">20s</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      retries</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-建立資料目錄" tabindex="-1"><a class="header-anchor" href="#_3-建立資料目錄"><span>3. 建立資料目錄</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> data</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>記得這個資料夾，它就是你的小金庫</p></blockquote><h3 id="_4-啟動服務" tabindex="-1"><a class="header-anchor" href="#_4-啟動服務"><span>4. 啟動服務</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker-compose</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> up</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p><code>-d</code> 就是「我要在背景偷偷執行，不要吵我」的意思</p></blockquote><h2 id="初始設定與測試" tabindex="-1"><a class="header-anchor" href="#初始設定與測試"><span>初始設定與測試</span></a></h2><p>現在來確認一下我們的「偽裝」有沒有成功：</p><h3 id="_1-檢查服務狀態" tabindex="-1"><a class="header-anchor" href="#_1-檢查服務狀態"><span>1. 檢查服務狀態</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看容器狀態</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker-compose</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ps</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看日誌</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker-compose</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> logs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> minio</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-存取-web-管理介面" tabindex="-1"><a class="header-anchor" href="#_2-存取-web-管理介面"><span>2. 存取 Web 管理介面</span></a></h3><p>開啟瀏覽器前往：<code>http://你的伺服器IP:9001</code></p><ul><li>帳號：<code>minioadmin</code> （國際通用預設帳號）</li><li>密碼：<code>minioadmin123</code> （資安見了會哭）</li></ul><h3 id="_3-建立第一個-bucket" tabindex="-1"><a class="header-anchor" href="#_3-建立第一個-bucket"><span>3. 建立第一個 Bucket</span></a></h3><ol><li>登入後點選左側「Buckets」</li><li>點選「Create Bucket」</li><li>輸入 Bucket 名稱（例如：<code>test-bucket</code>）</li><li>點選「Create Bucket」完成建立</li></ol><blockquote><p>恭喜你！你現在有了一個虛擬的雲端儲存空間</p></blockquote><h2 id="安全設定建議" tabindex="-1"><a class="header-anchor" href="#安全設定建議"><span>安全設定建議</span></a></h2><p>現在來做一些「不想被駭客在我家烤肉」的設定：</p><h3 id="_1-更改預設密碼" tabindex="-1"><a class="header-anchor" href="#_1-更改預設密碼"><span>1. 更改預設密碼</span></a></h3><p>首先，把那個「minioadmin123」換掉！<br> 修改 <code>docker-compose.yml</code> 中的環境變數：</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">environment</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">MINIO_ROOT_USER=你的管理員帳號</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">MINIO_ROOT_PASSWORD=你的強密碼</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-設定-https-選用" tabindex="-1"><a class="header-anchor" href="#_2-設定-https-選用"><span>2. 設定 HTTPS（選用）</span></a></h3><p>如需 HTTPS，可以配合 Nginx 反向代理或使用 Let&#39;s Encrypt：</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 在 docker-compose.yml 新增 nginx 服務</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">nginx</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  image</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nginx:alpine</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  container_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">minio-nginx</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  restart</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">unless-stopped</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  ports</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;443:443&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;80:80&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  volumes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">./nginx.conf:/etc/nginx/nginx.conf</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">./ssl:/etc/ssl/certs</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  depends_on</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">minio</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="效能改善" tabindex="-1"><a class="header-anchor" href="#效能改善"><span>效能改善</span></a></h2><h3 id="_1-磁碟-i-o-最佳化" tabindex="-1"><a class="header-anchor" href="#_1-磁碟-i-o-最佳化"><span>1. 磁碟 I/O 最佳化</span></a></h3><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 在 docker-compose.yml 中加入</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">services</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  minio</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # ... 其他設定</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    volumes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">./data:/data:Z</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # SELinux 環境使用</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    ulimits</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      nofile</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        soft</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">65536</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        hard</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">65536</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-記憶體設定" tabindex="-1"><a class="header-anchor" href="#_2-記憶體設定"><span>2. 記憶體設定</span></a></h3><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">environment</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">MINIO_ROOT_USER=minioadmin</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">MINIO_ROOT_PASSWORD=minioadmin123</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 設定記憶體快取</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">MINIO_CACHE_DRIVES=/cache</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">MINIO_CACHE_EXCLUDE=&quot;*.pdf,*.doc&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="監控與維運" tabindex="-1"><a class="header-anchor" href="#監控與維運"><span>監控與維運</span></a></h2><h3 id="_1-健康檢查" tabindex="-1"><a class="header-anchor" href="#_1-健康檢查"><span>1. 健康檢查</span></a></h3><p>MinIO 提供內建的健康檢查端點：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 檢查服務健康狀態</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">curl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> http://你的伺服器IP:9000/minio/health/live</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 檢查準備狀態</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">curl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> http://你的伺服器IP:9000/minio/health/ready</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-日誌管理" tabindex="-1"><a class="header-anchor" href="#_2-日誌管理"><span>2. 日誌管理</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 即時查看日誌</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker-compose</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> logs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> minio</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 設定日誌輪轉（在 docker-compose.yml 中）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">logging:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  driver:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;json-file&quot;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  options:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    max-size:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;10m&quot;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    max-file:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;3&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-備份策略" tabindex="-1"><a class="header-anchor" href="#_3-備份策略"><span>3. 備份策略</span></a></h3><p>定期備份重要資料：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#!/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># backup.sh</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">DATE</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">date</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +%Y%m%d_%H%M%S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">BACKUP_DIR</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/backup/minio_</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$DATE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 建立備份目錄</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $BACKUP_DIR</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 同步資料</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mirror</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> myminio/important-bucket</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $BACKUP_DIR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 壓縮備份</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tar</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -czf</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $BACKUP_DIR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.tar.gz</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -C</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /backup</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> minio_</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$DATE</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 清理舊備份（保留 7 天）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">find</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /backup</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;minio_*.tar.gz&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -mtime</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +7</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -delete</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="常見問題排解" tabindex="-1"><a class="header-anchor" href="#常見問題排解"><span>常見問題排解</span></a></h2><h3 id="問題-1-無法存取-web-介面" tabindex="-1"><a class="header-anchor" href="#問題-1-無法存取-web-介面"><span>問題 1：無法存取 Web 介面</span></a></h3><p><strong>解決方法：</strong></p><ol><li>檢查防火牆設定：<code>sudo ufw allow 9001</code></li><li>確認容器是否正常運行：<code>docker-compose ps</code></li><li>查看日誌：<code>docker-compose logs minio</code></li></ol><h3 id="問題-2-檔案上傳失敗" tabindex="-1"><a class="header-anchor" href="#問題-2-檔案上傳失敗"><span>問題 2：檔案上傳失敗</span></a></h3><p><strong>可能原因：</strong></p><ul><li>磁碟空間不足</li><li>權限設定問題</li><li>網路連線問題</li></ul><p><strong>解決步驟：</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 檢查磁碟空間</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">df</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -h</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 檢查容器資源使用</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> stats</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> minio-server</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 重設權限</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> chown</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -R</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 1000:1000</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ./data</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="問題-3-效能問題" tabindex="-1"><a class="header-anchor" href="#問題-3-效能問題"><span>問題 3：效能問題</span></a></h3><p><strong>效能改善建議：</strong></p><ul><li>使用 SSD 儲存</li><li>調整 Docker 資源限制</li><li>啟用 MinIO 快取功能</li></ul><h2 id="參考資料" tabindex="-1"><a class="header-anchor" href="#參考資料"><span>參考資料</span></a></h2><ul><li><a href="https://min.io/docs/" target="_blank" rel="noopener noreferrer">MinIO 官方文件</a></li><li><a href="https://hub.docker.com/r/minio/minio" target="_blank" rel="noopener noreferrer">MinIO Docker Hub</a></li><li><a href="https://www.reddit.com/r/selfhosted/comments/1kva3pw/avoid_minio_developers_introduce_trojan_horse/" target="_blank" rel="noopener noreferrer">Reddit 討論 - MinIO 功能刪減爭議</a></li><li><a href="https://github.com/open-maxio/open-maxio" target="_blank" rel="noopener noreferrer">OpenMaxIO 專案</a></li></ul>`,68))])}const o=a(p,[["render",k]]),g=JSON.parse('{"path":"/posts/2025-08-15-minio-installation-and-usage/","title":"MinIO 安裝與使用","lang":"zh-TW","frontmatter":{"title":"MinIO 安裝與使用","description":"使用 docker 安裝與使用 MinIO","date":"2025-08-15T00:00:00.000Z","category":"資料儲存","tag":["MinIO","Object Storage","Docker","Ubuntu","S3"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"MinIO 安裝與使用\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-08-15T00:00:00.000Z\\",\\"dateModified\\":\\"2025-08-15T06:33:51.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Pamis Wang\\",\\"url\\":\\"https://pamis.dev\\",\\"email\\":\\"pamis.wang@gmail.com\\"}]}"],["meta",{"property":"og:url","content":"https://pamis.dev/posts/2025-08-15-minio-installation-and-usage/"}],["meta",{"property":"og:site_name","content":"Pamis Blog"}],["meta",{"property":"og:title","content":"MinIO 安裝與使用"}],["meta",{"property":"og:description","content":"使用 docker 安裝與使用 MinIO"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-TW"}],["meta",{"property":"og:updated_time","content":"2025-08-15T06:33:51.000Z"}],["meta",{"property":"article:tag","content":"S3"}],["meta",{"property":"article:tag","content":"Ubuntu"}],["meta",{"property":"article:tag","content":"Docker"}],["meta",{"property":"article:tag","content":"Object Storage"}],["meta",{"property":"article:tag","content":"MinIO"}],["meta",{"property":"article:published_time","content":"2025-08-15T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-08-15T06:33:51.000Z"}]]},"git":{"createdTime":1755194709000,"updatedTime":1755239631000,"contributors":[{"name":"Pamis Wang","username":"","email":"pamis.wang@gmail.com","commits":3},{"name":"Claude","username":"Claude","email":"noreply@anthropic.com","commits":1,"url":"https://github.com/Claude"}]},"readingTime":{"minutes":4.26,"words":1278},"filePathRelative":"posts/2025-08-15-minio-installation-and-usage/index.md","excerpt":"\\n<h2>前言</h2>\\n<p>又是檔案上傳的需求來了！</p>\\n<p>還記得那個年代嗎？<br>\\n檔案直接丟進伺服器的某個角落，然後祈禱不要被駭客發現...<br>\\n不然就是資料夾不小心動到後就全員失蹤了。</p>\\n<p>後來 FTP 出現，我們以為自己很專業，結果明文傳輸被抓包，<br>\\n現在大家都在講物件儲存，彷彿不用 S3 就不夠潮。</p>\\n<p>但是！錢包空空怎麼辦？AWS 帳單一來就想哭，<br>\\n這時候 <strong>MinIO</strong> 就是我們的救星啦！免費自架，還能假裝自己在用 S3 ，<br>\\n反正 API 相容，老闆和客戶看不出來的啦 （小聲）</p>\\n<figure><figcaption>軟體開發日常</figcaption></figure>\\n"}');export{o as comp,g as data};
