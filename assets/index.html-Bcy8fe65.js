import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,a as s,b as e,e as l,o as t}from"./app-DcPmYxSv.js";const h={};function k(p,i){return t(),n("div",null,[i[0]||(i[0]=s("h1",{id:"php-常用設定",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#php-常用設定"},[s("span",null,"PHP 常用設定")])],-1)),i[1]||(i[1]=s("h2",{id:"前言",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#前言"},[s("span",null,"前言")])],-1)),i[2]||(i[2]=s("p",null,"因為常常用到就記錄一下。",-1)),e(" more "),i[3]||(i[3]=l(`<h2 id="修改設定檔" tabindex="-1"><a class="header-anchor" href="#修改設定檔"><span>修改設定檔</span></a></h2><p>如果是安裝在 Ubuntu 系統，預設路徑可參考以下。</p><p><code>/etc/php/7.4/fpm/php.ini</code><br><code>/etc/php/8.1/fpm/php.ini</code></p><h2 id="修改項目" tabindex="-1"><a class="header-anchor" href="#修改項目"><span>修改項目</span></a></h2><h3 id="調整擴充模組的-extension-註解-可參考" tabindex="-1"><a class="header-anchor" href="#調整擴充模組的-extension-註解-可參考"><span>調整擴充模組的 extension 註解 可參考</span></a></h3><div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-ini"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">extension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">bz2</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">extension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">curl</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; extension=ffi</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; extension=ftp</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">extension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">fileinfo</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; extension=gd</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">extension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">gettext</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; extension=gmp</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; extension=intl</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; extension=imap</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; extension=ldap</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">extension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">mbstring</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">extension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">exif      </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; Must be after mbstring as it depends on it</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">extension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">mysqli</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; extension=oci8_12c  ; Use with Oracle Database 12c Instant Client</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; extension=oci8_19  ; Use with Oracle Database 19 Instant Client</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; extension=odbc</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">extension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">openssl</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; extension=pdo_firebird</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">extension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">pdo_mysql</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; extension=pdo_oci</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; extension=pdo_odbc</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">extension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">pdo_pgsql</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">extension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">pdo_sqlite</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; extension=pgsql</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; extension=shmop</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="修改時區" tabindex="-1"><a class="header-anchor" href="#修改時區"><span>修改時區</span></a></h3><div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-ini"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">date.timezone</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> Asia/Taipei</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="上傳檔案大小限制" tabindex="-1"><a class="header-anchor" href="#上傳檔案大小限制"><span>上傳檔案大小限制</span></a></h3><p>放寬檔案上傳大小相關的設定：記憶體用量上限 &gt; POST 大小上限 &gt; 上傳檔案大小上限。</p><div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-ini"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; 上傳檔案大小上限（單一檔案大小）</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">upload_max_filesize</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> 50M</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; POST 大小上限（所有檔案大小加總）</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">post_max_size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> 200M</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; 記憶體用量上限</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">memory_limit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> 512M</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="執行時間設定" tabindex="-1"><a class="header-anchor" href="#執行時間設定"><span>執行時間設定</span></a></h3><p>上傳大型檔案通常都會需要比較久的時間，為了避免逾時需要調整執行時間。</p><div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-ini"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; PHP 指令稿執行時間上限（秒）</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">max_execution_time</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> 600</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; PHP 指令稿解析輸入資料時間上限（秒）</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">max_input_time</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> 600</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>若擔心網路不穩造成傳大檔案時容易斷線的話，可以嘗試將 socket 等待逾時的設定調大一點。</p><div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-ini"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; socket 等待逾時（秒）</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">default_socket_timeout</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> 600</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>若有使用 MySQL 資料庫的連線，可以修改一下 MySQL 連線逾時的設定，避免上傳檔案等待太久，造成資料庫連線中斷：</p><div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-ini"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; MySQL 資料庫連線逾時（秒，-1 代表永不斷線）</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">mysql.connect_timeout</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> -1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="是否給-cookie-加上-httponly-標誌" tabindex="-1"><a class="header-anchor" href="#是否給-cookie-加上-httponly-標誌"><span>是否給 cookie 加上 httpOnly 標誌</span></a></h3><div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-ini"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">session.cookie_httponly</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> 1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="修改充檔案的資料夾目錄" tabindex="-1"><a class="header-anchor" href="#修改充檔案的資料夾目錄"><span>修改充檔案的資料夾目錄</span></a></h3><div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-ini"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; extension_dir = &quot;ext&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">extension_dir</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;D:\\WNMP\\php-8.1.5-nts-Win32-vs16-x64\\ext&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="其他修改" tabindex="-1"><a class="header-anchor" href="#其他修改"><span>其他修改</span></a></h3><div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-ini"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; 僅適用 Apache 伺服器 是否啟用動態載入模組功能</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">enable_dl</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> On</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; 與 $_SERVER[&#39;PATH_INFO&#39;] 變數取值功能有關</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">cgi.fix_pathinfo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">1</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; 可防止任何人使用 URL 直接調用 PHP</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">cgi.force_redirect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> 1</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; 設定 PHP 是否傳送 RFC 2616 相容的報頭</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">cgi.rfc2616_headers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> 1</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">; 使IIS的FastCGI模擬應用程式的安全金鑰</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">fastcgi.impersonate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> 1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,24))])}const c=a(h,[["render",k]]),o=JSON.parse('{"path":"/posts/2022-08-28-config-php/","title":"PHP 常用設定","lang":"zh-TW","frontmatter":{"title":"PHP 常用設定","description":"PHP 常用設定","date":"2022-08-28T00:00:00.000Z","category":"後端","tag":["PHP","PHP 7","PHP 8"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"PHP 常用設定\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-08-28T00:00:00.000Z\\",\\"dateModified\\":\\"2023-08-22T16:59:32.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Pamis Wang\\",\\"url\\":\\"https://pamis.dev\\",\\"email\\":\\"pamis.wang@gmail.com\\"}]}"],["meta",{"property":"og:url","content":"https://pamis.dev/posts/2022-08-28-config-php/"}],["meta",{"property":"og:site_name","content":"Pamis Blog"}],["meta",{"property":"og:title","content":"PHP 常用設定"}],["meta",{"property":"og:description","content":"PHP 常用設定"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-TW"}],["meta",{"property":"og:updated_time","content":"2023-08-22T16:59:32.000Z"}],["meta",{"property":"article:tag","content":"PHP 8"}],["meta",{"property":"article:tag","content":"PHP 7"}],["meta",{"property":"article:tag","content":"PHP"}],["meta",{"property":"article:published_time","content":"2022-08-28T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-08-22T16:59:32.000Z"}]]},"git":{"createdTime":1689521396000,"updatedTime":1692723572000,"contributors":[{"name":"pamis","username":"pamis","email":"pamis1116@gmail.com","commits":5,"url":"https://github.com/pamis"}]},"readingTime":{"minutes":1.84,"words":553},"filePathRelative":"posts/2022-08-28-config-php/index.md","excerpt":"\\n<h2>前言</h2>\\n<p>因為常常用到就記錄一下。</p>\\n"}');export{c as comp,o as data};
